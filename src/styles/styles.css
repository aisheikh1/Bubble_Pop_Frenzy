/* src/styles/styles.css */

/* Import title animations */
@import url('./title-animations.css');

body {
  font-family: 'Inter', sans-serif;
  background: #faf0e6; /*page background*/
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  overflow: hidden;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

@keyframes gradientCycle {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}

canvas {
  background-color: #FFFFFF;
  border-radius: 20px;
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
  display: none;
  touch-action: none;
  border: 3px solid rgba(255, 255, 255, 0.8);
  box-sizing: border-box;
  opacity: 0;
  transform: scale(0.8);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

canvas.canvas-appearing {
  display: block;
  opacity: 1;
  transform: scale(1);
}

.game-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0px;
  width: 95vw;
  max-width: 500px;
  height: 90vh;
  padding: 1.5rem;
  box-sizing: border-box;
  position: relative;
}

/* Flexible area under the canvas that fills all remaining space */
.below-canvas {
  flex: 1;                 /* take all leftover height beneath the canvas */
  width: 100%;
  display: flex;           /* center the buttons inside this region */
  align-items: center;     /* vertical center -> equidistant top/bottom of this area */
  justify-content: space-evenly; /* evenly distribute back, pause, and restart buttons */
  position: relative; 
  z-index: 1;
  gap: 1rem;               /* spacing between buttons */
}

/* High-contrast circular button - WHITE background with BLACK icons */
.back-btn,
.restart-btn,
.pause-btn {
  touch-action: manipulation;  /* eliminates 300ms delay on some UAs */
  -webkit-tap-highlight-color: transparent; /* nicer tap highlight on iOS */
  user-select: none;           /* avoids text selection during taps */
  min-height: 44px;            /* accessible touch target (Apple/Google HIG) */
  min-width: 44px;
  width: 44px;
  height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  border: none;
  border-radius: 50%;
  background: #FFFFFF;     /* WHITE background */
  color: #222;             /* BLACK icon color */
  box-shadow: 0 6px 15px rgba(0,0,0,0.25);
  cursor: pointer;
  transform: translateZ(0);
}

.back-btn svg,
.restart-btn svg,
.pause-btn svg {
  width: 32px;
  height: 32px;
  flex: 0 0 auto;
}

.back-btn:active,
.restart-btn:active,
.pause-btn:active { 
  filter: brightness(0.9); /* Slightly darken on press */
}

/* Hidden by default; shown only during gameplay */
.back-btn.hidden,
.restart-btn.hidden,
.pause-btn.hidden {
  display: none;
}

.back-btn:focus-visible,
.restart-btn:focus-visible,
.pause-btn:focus-visible {
  outline: 3px solid #FFF;
  outline-offset: 3px;
}

.game-info {
  display: flex;
  justify-content: space-around;
  width: 100%;
  color: #fff;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  font-weight: 700;
  font-size: clamp(0.9rem, 4vw, 1.2rem);
  text-align: center;
  position: relative; /* Establish positioning context for urgent messages */
  min-height: 2.5rem; /* Reserve space to prevent layout shift */
  margin-bottom: 0.5rem;
}

.message-box {
  background-color: rgba(255, 255, 255, 0.9);
  padding: 2rem;
  border-radius: 20px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
  text-align: center;
  max-width: 90%;
  opacity: 1;
  transform: scale(1);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.message-box.fade-out {
  opacity: 0;
  transform: scale(0.9);
  pointer-events: none;
}

.message-box h2 {
  font-family: 'Bangers', cursive;
  font-size: 2rem;
  margin-bottom: 0.5rem;
  color: #FF6347;
}

.message-box p {
  font-family: 'Inter', sans-serif;
  font-size: 1.2rem;
  margin-bottom: 1.5rem;
  color: #333;
}

.message-box button {
  background: linear-gradient(145deg, #FF7E5F, #FEB47B);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 0.7rem 1.5rem;
  font-family: 'Fredoka One', cursive;
  font-size: 1.1rem;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  transition: transform 0.2s, box-shadow 0.2s;
  letter-spacing: 0.5px;
}

.message-box button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
}

/* ============================================================================
   URGENT MESSAGE STYLES - POSITIONED ABOVE CANVAS
   ============================================================================
   Messages appear between game-info and canvas to avoid gameplay interruption
   Positioned absolutely relative to game-container
*/

.urgent-message {
  /* Position above canvas, below game-info */
  position: absolute !important;
  top: calc(2.5rem + 0.5rem) !important; /* Below game-info (height + margin) */
  left: 50% !important;
  transform: translateX(-50%) scale(0.98) !important;
  
  /* Styling */
  padding: 12px 20px !important;
  border-radius: 14px !important;
  font-weight: 700 !important;
  font-family: 'Fredoka One', 'Comic Sans MS', cursive !important;
  font-size: clamp(16px, 4vw, 22px) !important;
  letter-spacing: 0.5px !important;
  
  /* Elevation and visibility */
  box-shadow: 0 8px 24px rgba(0,0,0,0.35), 0 4px 8px rgba(0,0,0,0.2) !important;
  z-index: 900 !important; /* Below pause overlay (1000) but above canvas */
  pointer-events: none !important;
  
  /* Animation properties */
  opacity: 0 !important;
  transition: opacity 140ms ease, transform 140ms ease !important;
  will-change: opacity, transform !important;
  
  /* Layout */
  text-align: center !important;
  max-width: 85vw !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  
  /* Prevent text selection */
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  
  /* Ensure visibility on all backgrounds */
  backdrop-filter: blur(4px) !important;
  -webkit-backdrop-filter: blur(4px) !important;
}

/* Animation when message appears */
.urgent-message.showing {
  opacity: 1 !important;
  transform: translateX(-50%) scale(1) !important;
}

/* Ensure urgent message doesn't interfere with canvas touch events */
canvas + .urgent-message {
  pointer-events: none !important;
}

@keyframes fadeInOut {
  0% {
    opacity: 0;
    transform: translate(-50%, -60%);
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
  80% {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -40%);
  }
}

@keyframes rainbowText {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}

/* ============================================================================
   FRENZY MODE STYLES - NEW
   ============================================================================
   Styles for frenzy countdown and visual effects
*/

/* Frenzy countdown container (for text-based countdown if needed) */
.frenzy-countdown {
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Arial Black', Arial, sans-serif;
  font-size: clamp(48px, 10vw, 72px);
  font-weight: bold;
  color: #FFD700;
  text-shadow: 
    0 0 20px rgba(255, 215, 0, 0.8),
    0 0 40px rgba(255, 215, 0, 0.6),
    0 0 60px rgba(255, 215, 0, 0.4),
    4px 4px 8px rgba(0, 0, 0, 0.5);
  z-index: 950;
  pointer-events: none;
  text-align: center;
  line-height: 1;
  animation: frenzyPulse 1s ease-in-out infinite;
  user-select: none;
}

/* Countdown number color variants based on time remaining */
.frenzy-countdown.time-high {
  color: #FFD700; /* Gold - plenty of time */
  text-shadow: 
    0 0 20px rgba(255, 215, 0, 0.8),
    0 0 40px rgba(255, 215, 0, 0.6),
    0 0 60px rgba(255, 215, 0, 0.4),
    4px 4px 8px rgba(0, 0, 0, 0.5);
}

.frenzy-countdown.time-medium {
  color: #FFA500; /* Orange - getting low */
  text-shadow: 
    0 0 20px rgba(255, 165, 0, 0.8),
    0 0 40px rgba(255, 165, 0, 0.6),
    0 0 60px rgba(255, 165, 0, 0.4),
    4px 4px 8px rgba(0, 0, 0, 0.5);
}

.frenzy-countdown.time-low {
  color: #FF4500; /* Red-orange - urgent */
  text-shadow: 
    0 0 20px rgba(255, 69, 0, 0.9),
    0 0 40px rgba(255, 69, 0, 0.7),
    0 0 60px rgba(255, 69, 0, 0.5),
    4px 4px 8px rgba(0, 0, 0, 0.6);
  animation: frenzyCriticalPulse 0.5s ease-in-out infinite;
}

.frenzy-countdown.time-critical {
  color: #FF0000; /* Red - critical */
  text-shadow: 
    0 0 25px rgba(255, 0, 0, 1),
    0 0 50px rgba(255, 0, 0, 0.8),
    0 0 75px rgba(255, 0, 0, 0.6),
    4px 4px 10px rgba(0, 0, 0, 0.7);
  animation: frenzyCriticalPulse 0.3s ease-in-out infinite;
  font-size: clamp(56px, 12vw, 84px); /* Larger in final second */
}

/* Pulse animation for frenzy countdown */
@keyframes frenzyPulse {
  0%, 100% {
    transform: translateX(-50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translateX(-50%) scale(1.05);
    opacity: 0.95;
  }
}

/* More intense pulse for critical time */
@keyframes frenzyCriticalPulse {
  0%, 100% {
    transform: translateX(-50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translateX(-50%) scale(1.15);
    opacity: 0.9;
  }
}

/* Frenzy mode active indicator (optional visual cue) */
.frenzy-active-indicator {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(
    90deg,
    #FFD700,
    #FFA500,
    #FF6347,
    #FFA500,
    #FFD700
  );
  background-size: 200% 100%;
  animation: frenzyGradientMove 2s linear infinite;
  z-index: 895; /* Below urgent messages but above canvas */
  pointer-events: none;
}

@keyframes frenzyGradientMove {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

/* Frenzy activation flash effect (for Go Frenzy! moment) */
.frenzy-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
  z-index: 850;
  pointer-events: none;
  animation: frenzyFlashAnimation 0.5s ease-out;
}

@keyframes frenzyFlashAnimation {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* Frenzy end flash effect (for Frenzy Time Up! moment) */
.frenzy-end-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255, 99, 71, 0.3) 0%, transparent 70%);
  z-index: 850;
  pointer-events: none;
  animation: frenzyFlashAnimation 0.5s ease-out;
}

/* Canvas border glow during frenzy mode */
canvas.frenzy-mode-active {
  box-shadow: 
    0 0 20px rgba(255, 215, 0, 0.6),
    0 0 40px rgba(255, 215, 0, 0.4),
    0 15px 30px rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 215, 0, 0.8);
  animation: frenzyCanvasGlow 1s ease-in-out infinite;
}

@keyframes frenzyCanvasGlow {
  0%, 100% {
    box-shadow: 
      0 0 20px rgba(255, 215, 0, 0.6),
      0 0 40px rgba(255, 215, 0, 0.4),
      0 15px 30px rgba(0, 0, 0, 0.4);
  }
  50% {
    box-shadow: 
      0 0 30px rgba(255, 215, 0, 0.8),
      0 0 60px rgba(255, 215, 0, 0.6),
      0 15px 30px rgba(0, 0, 0, 0.4);
  }
}

/* ============================================================================
   PAUSED STATE OVERLAY
   ============================================================================
*/

.paused-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'Bangers', cursive;
  font-size: 3rem;
  font-weight: bold;
  color: #222;
  text-shadow: 
    0 0 20px rgba(255, 255, 255, 0.9),
    0 0 40px rgba(255, 255, 255, 0.6),
    2px 2px 4px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  pointer-events: none;
  text-align: center;
  line-height: 1.2;
  padding: 20px;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 20px;
  backdrop-filter: blur(5px);
  animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {
  0%, 100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    opacity: 0.85;
    transform: translate(-50%, -50%) scale(1.03);
  }
}

/* ============================================================================
   RESPONSIVE ADJUSTMENTS
   ============================================================================
*/

/* Adjust urgent message positioning for smaller screens */
@media screen and (max-width: 400px) {
  .urgent-message {
    font-size: 14px !important;
    padding: 10px 16px !important;
    max-width: 90vw !important;
  }
  
  .frenzy-countdown {
    font-size: clamp(36px, 8vw, 56px);
  }
  
  .frenzy-countdown.time-critical {
    font-size: clamp(42px, 10vw, 64px);
  }
}

/* Adjust for landscape orientation */
@media screen and (max-width: 550px) and (orientation: landscape) {
  body {
    flex-direction: row;
    justify-content: center;
    align-items: center;
  }
  
  .game-container {
    max-height: 95vh;
  }
  
  .urgent-message {
    top: 1rem !important; /* Closer to top in landscape */
    font-size: clamp(12px, 3vw, 18px) !important;
  }
  
  .frenzy-countdown {
    top: 10%;
    font-size: clamp(32px, 8vw, 48px);
  }
  
  .game-info {
    font-size: clamp(0.7rem, 3vw, 1rem);
    min-height: 2rem;
  }
}

/* Ensure urgent messages work in portrait on tablets */
@media screen and (min-width: 551px) and (max-width: 768px) {
  .urgent-message {
    font-size: clamp(18px, 3.5vw, 24px) !important;
    padding: 14px 22px !important;
  }
  
  .frenzy-countdown {
    font-size: clamp(52px, 9vw, 68px);
  }
}

/* Large screens - optimize spacing */
@media screen and (min-width: 769px) {
  .urgent-message {
    font-size: 22px !important;
    padding: 14px 24px !important;
    top: calc(2.5rem + 0.75rem) !important;
  }
  
  .frenzy-countdown {
    font-size: 72px;
    top: 12%;
  }
  
  .frenzy-countdown.time-critical {
    font-size: 84px;
  }
}

/* High DPI displays - enhance text rendering */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .urgent-message,
  .frenzy-countdown {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .urgent-message,
  .frenzy-countdown,
  .paused-overlay,
  canvas.frenzy-mode-active {
    animation: none !important;
    transition: none !important;
  }
  
  .frenzy-countdown {
    transform: translateX(-50%) !important;
  }
  
  .urgent-message {
    transform: translateX(-50%) !important;
  }
}

/* Dark mode support (future enhancement) */
@media (prefers-color-scheme: dark) {
  .urgent-message {
    /* Ensure messages remain visible in dark mode */
    box-shadow: 
      0 8px 24px rgba(0,0,0,0.5), 
      0 4px 8px rgba(0,0,0,0.3),
      0 0 0 1px rgba(255,255,255,0.1) !important;
  }
}

/* Print styles - hide game elements */
@media print {
  .urgent-message,
  .frenzy-countdown,
  .paused-overlay,
  canvas,
  .back-btn,
  .restart-btn,
  .pause-btn {
    display: none !important;
  }
}